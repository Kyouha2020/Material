@use "../../design/color/theme" as *
@use "../../design/theme/theme" as *
@use "../../design/environment/elevation" as *
@use "../../design/interaction/ripple" as *
@use "../../design/interaction/states" as *
@use "../../design/layout/density" as *
@use "../../design/layout/spacing" as *
@use "../../design/shape/shape" as *
@use "../../design/typography/typography" as *
@use "../../design/usability/accessibility" as *
@use "../../design/usability/bidirectionality" as *

$corner-radius: 4px
$ripple-color: rgb($primary)
$contained-ripple-color: rgb($on-primary)
$container-color: rgb($surface)
$contained-container-color: rgb($primary)
$disabled-container-color: rgba($surface, $disabled-filled-container)
$ink-color: rgba($primary, $text--high-emphasis)
$contained-ink-color: rgba($on-primary, $text--high-emphasis)
$disabled-ink-color: rgba($on-surface, $text--disabled)
$stroke-width: 1px
$stroke-color: rgba($on-surface, $stroke)
$dark-stroke-color: rgb($primary)

.mtrl-button
  @include ripple_
  @include ripple(prop(button-ripple-color, $ripple-color))
  @include touch-target
  @include corner(prop(button-corner-radius, $corner-radius))
  @include stroke($color: transparent)
  @include height(prop(button-height, 36px))
  @include padding(0, 2)
  @include typography_(button)
  background-color: prop(button-container-color, $container-color)
  color: prop(button-ink-color, $ink-color)
  min-width: 64px
  position: relative
  display: inline-flex
  align-items: center
  justify-content: center
  vertical-align: middle
  user-select: none
  white-space: nowrap
  border: none
  outline: none
  -webkit-tap-highlight-color: transparent

  &:hover
    cursor: pointer

  &:disabled
    @include elevation(0)
    color: prop(button-disabled-ink-color, $disabled-ink-color)
    background-color: prop(button-disabled-container-color, $disabled-container-color)
    cursor: default
    pointer-events: none

    .mtrl-button__icon
      color: prop(button-disabled-icon-color, prop(button-disabled-ink-color))

  &--outlined
    @include padding(0, 4)
    @include stroke_
    @include stroke(prop(button-stroke-width, $stroke-width), prop(button-stroke-color, $stroke-color))
    @include dark-theme
      &:focus
        @include stroke($color: prop(button-dark-stroke-color, $dark-stroke-color))

  &--contained
    @include ripple(prop(button-ripple-color, $contained-ripple-color))
    @include dark-theme
      @include ripple(prop(button-ripple-color, #ffffff))
    @include padding(0, 4)
    @include elevation(2, 4, 6, 8)
    background-color: prop(button-container-color, $contained-container-color)
    color: prop(button-ink-color, $contained-ink-color)

    &:disabled
      background-color: rgba($on-surface, $disabled-filled-container)

  &--split &__icon
    @include height(prop(button-height, 36px))
    @include margin-horizontal(-2, 3)
    @include padding-horizontal(0, 2)
    @include ltr
      border-right: 1px solid rgba($on-surface, $stroke)
    @include rtl
      border-left: 1px solid rgba($on-surface, $stroke)

  &--split &__label + &__icon
    @include margin-horizontal(3, -2)
    @include padding-horizontal(2, 0)
    border: none
    @include ltr
      border-right: none
      border-left: 1px solid rgba($on-surface, $stroke)
    @include rtl
      border-left: none
      border-right: 1px solid rgba($on-surface, $stroke)

  &--vertical
    @include height(prop(button-height, 56px))
    flex-direction: column

    .mtrl-button__icon
      @include margin(0, 0, 1, 0)
      @include rtl
        @include margin(0, 0, 1, 0)

    .mtrl-button__label
      @include typography(button, 0.875)

    .mtrl-button__label + .mtrl-button__icon
      @include margin(1, 0, 0, 0)
      @include rtl
        @include margin(1, 0, 0, 0)

  &--two-column
    @include height(prop(button-height, 48px))

    .mtrl-button__label
      flex-direction: column

  &--float
    @include elevation(0, 0, 2, 4)
    @include padding(0, 4)

  &--raised
    @include elevation(2, 4, 6, 8)
    @include padding(0, 4)

  &--unelevated
    @include elevation(0, 0, 0, 0)

  &--rounded
    @include corner(calc(#{prop(button-height, prop(component-height))} / 2))

  &--tile
    @include corner(0)

  &--block
    width: 100%

    &--between
      justify-content: space-between

  &__label
    display: inline-flex
    align-items: center
    justify-content: center
    vertical-align: middle

    &--uppercase
      text-transform: uppercase

    &--sentence-case
      text-transform: none

    &--primary
      text-transform: none

    &--secondary
      @include typography(caption)
      color: rgba($primary, $text--medium-emphasis)
      text-transform: none

  &__icon
    @include margin-horizontal(-1, 2)
    width: 18px
    height: 18px
    display: inline-flex
    align-items: center
    justify-content: center
    vertical-align: middle
    color: prop(button-icon-color, prop(button-ink-color))
    font-size: 18px
    fill: currentColor

  &__label + &__icon
    @include margin-horizontal(2, -1)
