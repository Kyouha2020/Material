@use "sass:color"
@use "sass:map"
@use "../../design/color/light-theme" as *
@use "../../design/usability/accessibility" as *
@use "../../design/environment/elevation" as *
@use "../../design/interaction/states" as *
@use "../../design/layout/density" as *
@use "../../design/layout/spacing" as *
@use "../../design/shape/shape" as *
@use "../../design/typography/typography" as *

.mtrl-button
  @include typography(button)
  @include density(button)
  @include touch-target(button)
  @include shape(rounded, 4px)
  @include elevation(0)
  @include color($primary, $text--high-emphasis)
  @include margin(1)
  @include padding(0, 2)
  min-width: 64px
  background-color: $surface
  position: relative
  display: inline-flex
  align-items: center
  justify-content: center
  vertical-align: middle
  user-select: none
  white-space: nowrap
  border: none
  -webkit-tap-highlight-color: transparent
  transition: box-shadow 150ms

  &[unsafe]
    @include shape($radius: 8px, $safe: false)

    &.mtrl-button--outlined
      @include stroke($safe: false)

  &:not(:focus-visible)
    outline: none

  &:focus-visible
    overflow: hidden

  &:hover
    cursor: pointer
    background-color: color.mix($surface, $primary, 100% - $container-overlay--hovered)

  &:focus
    background-color: color.mix($surface, $primary, 100% - $container-overlay--focused)

  &:active
    background-color: color.mix($surface, $primary, 100% - $container-overlay--pressed)

  &:disabled
    @include elevation(0)
    @include color(color.grayscale($primary), $text--disabled)
    background-color: rgba($surface, $disabled-filled-container)
    cursor: default
    pointer-events: none

  &--outlined, &--contained, &--choice
    @include padding(0, 4)

  &--outlined
    @include stroke(rgba($on-surface, $stroke), 1px)
    @if tone($surface) == dark
      &:focus
        @include stroke($primary, 1px)

  &--contained
    @include color($on-primary, $text--high-emphasis)
    @include elevation(2)
    background-color: $primary

    &:hover
      @include elevation(4)
      background-color: color.mix($primary, $on-primary, 100% - $container-overlay--hovered)

    &:focus
      @include elevation(6)
      background-color: color.mix($primary, $on-primary, 100% - $container-overlay--focused)

    &:active
      @include elevation(8)
      background-color: color.mix($primary, $on-primary, 100% - $container-overlay--pressed)

    &:disabled
      background-color: rgba($on-surface, $disabled-filled-container)

  &--vertical
    @include density(vertical-button)
    @include touch-target(vertical-button)
    @include padding(8, 4)
    flex-direction: column

    .mtrl-button__icon
      @include margin(0, 0, 2)

    .mtrl-button__label
      @include typography(button, 0.875)

    .mtrl-button__label + .mtrl-button__icon
      @include margin(2, 0, 0)

    &.mtrl-button--rounded
      @include shape($radius: height(vertical-button) / 2)
      @include padding(8, 6)

  &--rounded
    @include shape($radius: height(button) / 2)

  &--block
    width: 100%

  &--transparent
    background-color: transparent

  &--no-touch-target
    overflow: hidden

  &__label
    display: inline-flex
    align-items: center
    justify-content: center

    &--sentence-case
      text-transform: none

  &__icon
    @include margin-horizontal(-1, 2)
    width: 18px
    height: 18px
    font-size: 18px
    fill: currentColor

  &__label + &__icon
    @include margin-horizontal(2, -1)
